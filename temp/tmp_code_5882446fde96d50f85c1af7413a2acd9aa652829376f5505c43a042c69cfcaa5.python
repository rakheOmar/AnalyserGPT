import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Load data from CSV
def load_data(file_path):
    try:
        data = pd.read_csv(file_path)
        print("Data loaded successfully.")
        return data
    except Exception as e:
        print(f"Error loading data: {e}")
        return None

# Analyze numeric data for correlation
def analyze_correlation(data):
    if data is not None:
        # Select only numeric columns for correlation analysis
        numeric_data = data.select_dtypes(include=[np.number])
        
        # Calculate correlation matrix
        correlation_matrix = numeric_data.corr()
        print("Correlation matrix calculated.")
        
        return correlation_matrix
    else:
        print("No data to analyze.")
        return None

# Save a heatmap of the correlation matrix
def save_correlation_heatmap(correlation_matrix, output_file='correlation_heatmap.png'):
    if correlation_matrix is not None:
        plt.figure(figsize=(10, 8))
        sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', fmt=".2f")
        plt.title('Correlation Matrix Heatmap')
        plt.savefig(output_file)
        plt.close()
        print(f"Correlation heatmap saved as '{output_file}'.")
    else:
        print("No correlation matrix to save.")

# Main execution
if __name__ == "__main__":
    data = load_data('causes_of_religious_orthodoxy.csv')
    corr_matrix = analyze_correlation(data)
    save_correlation_heatmap(corr_matrix)

